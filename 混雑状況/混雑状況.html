<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡åŒ–ç¥­ ä¼ç”»æ¤œç´¢ï¼†æ··é›‘çŠ¶æ³</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <style>
        body { font-family: sans-serif; background: #f4f4f4; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        
        /* ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .swiper { width: 100%; padding-bottom: 30px; }
        .project-card {
            background: white; border-radius: 15px; padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); height: 250px;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .status-badge {
            display: inline-block; padding: 5px 10px; border-radius: 20px;
            font-size: 0.8em; font-weight: bold; color: white;
        }
        .status-ç©ºã { background: #28a745; }
        .status-æ··é›‘ { background: #ffc107; color: black; }
        .status-å£²ã‚Šåˆ‡ã‚Œãƒ»çµ‚äº† { background: #dc3545; }

        /* åœ°å›³ã‚¨ãƒªã‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .map-container {
            position: relative; width: 100%; height: 300px;
            background: #ddd; margin: 20px 0; border-radius: 10px;
            overflow: hidden; border: 2px solid #ccc;
        }
        .map-image { width: 100%; height: 100%; object-fit: contain; }
        .map-pin {
            position: absolute; width: 12px; height: 12px;
            background: red; border-radius: 50%; transform: translate(-50%, -50%);
            cursor: pointer; border: 2px solid white;
        }

        h2 { border-left: 5px solid #333; padding-left: 10px; font-size: 1.2em; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸŒŸ ãŠã™ã™ã‚ãƒ»æ³¨ç›®ä¼ç”»</h2>
    <div class="swiper">
        <div class="swiper-wrapper" id="card-container">
            </div>
        <div class="swiper-pagination"></div>
    </div>

    <h2>ğŸ—ºï¸ æ ¡å†…ãƒãƒƒãƒ—</h2>
    <div class="map-container">
        <img src="YOUR_MAP_IMAGE_URL.jpg" alt="æ ¡å†…å›³" class="map-image">
        <div id="map-pins"></div>
    </div>

    <h2>ğŸ” ä¼ç”»ä¸€è¦§ãƒ»æ¤œç´¢</h2>
    <input type="text" id="search" placeholder="ä¼ç”»åã‚„å›£ä½“åã§æ¤œç´¢..." 
           style="width:100%; padding:10px; margin-bottom:15px; border-radius:5px; border:1px solid #ccc;">
    <div id="list-container"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    const GAS_URL = "https://script.google.com/macros/s/AKfycbwGPser_Y53kvBUxZKRRBDhciy9Xk6yVUALsAYxjrgn3ktOhrlfUMI-zUJ4GePwQAvW/exec";

    async function loadData() {
        const response = await fetch(GAS_URL);
        const data = await response.json();
        
        renderCards(data);
        renderMap(data);
    }

    function renderCards(projects) {
        const container = document.getElementById('card-container');
        container.innerHTML = projects.map(p => `
            <div class="swiper-slide">
                <div class="project-card">
                    <div>
                        <span class="status-badge status-${p.çŠ¶æ³}">${p.çŠ¶æ³}</span>
                        <h3>${p.ä¼ç”»å}</h3>
                        <p style="color: #666; font-size: 0.9em;">${p.å›£ä½“å} (${p.å ´æ‰€(æ£Ÿ)}${p.å ´æ‰€(éš)}éš)</p>
                    </div>
                    <a href="${p.ãƒªãƒ³ã‚¯URL}" target="_blank" style="text-decoration:none; color:#007bff;">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
                </div>
            </div>
        `).join('');

        // Swiperã®åˆæœŸåŒ–
        new Swiper('.swiper', {
            pagination: { el: '.swiper-pagination' },
            slidesPerView: 1.2,
            spaceBetween: 20,
            centeredSlides: true,
        });
    }

    function renderMap(projects) {
        const pinContainer = document.getElementById('map-pins');
        // ä¾‹: Cæ£Ÿãªã‚‰ã“ã®åº§æ¨™ã«è¡¨ç¤ºã€ã¨ã„ã£ãŸãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ã‚ã‚‰ã‹ã˜ã‚ä½œæˆ
        const locationMap = {
            "Aæ£Ÿ": { top: "30%", left: "40%" },
            "Bæ£Ÿ": { top: "50%", left: "60%" },
            "Cæ£Ÿ": { top: "70%", left: "30%" }
        };

        pinContainer.innerHTML = projects.map(p => {
            const pos = locationMap[p['å ´æ‰€(æ£Ÿ)']];
            if(!pos) return '';
            return `<div class="map-pin" style="top:${pos.top}; left:${pos.left};" title="${p.ä¼ç”»å}"></div>`;
        }).join('');
    }

    loadData();
</script>
</body>
</html>